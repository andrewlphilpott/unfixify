function saveOpts(){chrome.storage.sync.get({enabledDomains:[],disableAll:!1},function(e){enabledDomains=e.enabledDomains,disableAll=e.disableAll});var e={},n=document.querySelector("#opt-disable-all").checked;e.disableAll=!!n,document.querySelector("#opt-enable").checked?chrome.tabs.query({active:!0,currentWindow:!0},function(n){var t=document.createElement("a");t.href=n[0].url;var a=t.hostname;enabledDomains.indexOf(a)<0&&enabledDomains.push(a),e.enabledDomains=enabledDomains,storeOpt(e)}):chrome.tabs.query({active:!0,currentWindow:!0},function(n){var t=document.createElement("a");t.href=n[0].url;var a=t.hostname;if(enabledDomains.indexOf(a)>=0){var o=enabledDomains.indexOf(a);enabledDomains.splice(o,1)}e.enabledDomains=enabledDomains,storeOpt(e)})}function storeOpt(e){chrome.storage.sync.set(e,function(){var e=document.body,n=document.createElement("aside");n.className="toaster";var t=document.createElement("p");t.textContent="Your settings have been saved.",n.append(t),e.append(n),setTimeout(function(){n.remove()},3e3),chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.reload(e[0].id)})})}function initOpts(){document.querySelector("#opt-form").addEventListener("submit",function(e){e.preventDefault(),saveOpts()}),chrome.storage.sync.get({enabledDomains:[],disableAll:!1},function(e){if(enabledDomains=e.enabledDomains,disableAll=e.disableAll,chrome.tabs.query({active:!0,currentWindow:!0},function(e){var n=document.createElement("a");n.href=e[0].url;var t=n.hostname;enabledDomains.indexOf(t)>=0&&(document.querySelector("#opt-enable").checked=!0)}),!0===disableAll&&(document.querySelector("#opt-disable-all").checked=!0),enabledDomains.length){const e=document.querySelector("#enabled-list");for(let n=0;n<enabledDomains.length;n++){const t=document.createElement("li"),a=document.createElement("a");a.href=`http://${enabledDomains[n]}`,a.target="_blank",a.textContent=enabledDomains[n],t.appendChild(a),e.appendChild(t)}e.classList.add("hidden");const n=document.querySelector('[href="#enabled-list"]');n.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("hidden"),n.classList.toggle("expanded"),e.className.indexOf("hidden")>-1?n.textContent="Show enabled sites":n.textContent="Hide enabled sites"})}})}enabledDomains=[],disableAll=!1,document.addEventListener("DOMContentLoaded",initOpts);