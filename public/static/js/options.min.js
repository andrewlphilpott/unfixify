function saveOpts(){chrome.storage.sync.get({disabledDomains:[]},function(e){disabledDomains=e.disabledDomains});var e=document.querySelector("#opt-disable").checked;e?chrome.tabs.query({active:!0,currentWindow:!0},function(e){console.log(e);var n=document.createElement("a");n.href=e[0].url;var o=n.hostname;disabledDomains.indexOf(o)<0&&disabledDomains.push(o),storeOpt({disabledDomains:disabledDomains})}):chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(e){var n=document.createElement("a");n.href=e[0].url;var o=n.hostname;if(0<=disabledDomains.indexOf(o)){var s=disabledDomains.indexOf(o);disabledDomains.splice(s,1)}storeOpt({disabledDomains:disabledDomains})})}function storeOpt(e){chrome.storage.sync.set(e,function(){console.log("options saved")})}function initOpts(){document.querySelector("#opt-form").addEventListener("submit",function(e){e.preventDefault(),saveOpts()}),chrome.storage.sync.get({disabledDomains:[]},function(e){disabledDomains=e.disabledDomains,console.log(disabledDomains),chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(e){var n=document.createElement("a");n.href=e[0].url;var o=n.hostname;if(0<=disabledDomains.indexOf(o))document.querySelector("#opt-disable").checked=!0})})}disabledDomains=[],document.addEventListener("DOMContentLoaded",initOpts);