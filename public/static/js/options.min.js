function saveOpts(){chrome.storage.sync.get({disabledDomains:[],disableAll:!1},function(e){disabledDomains=e.disabledDomains,disableAll=e.disableAll});var e={},a=document.querySelector("#opt-disable-all").checked;e.disableAll=!!a,document.querySelector("#opt-disable").checked?chrome.tabs.query({active:!0,currentWindow:!0},function(a){var t=document.createElement("a");t.href=a[0].url;var n=t.hostname;disabledDomains.indexOf(n)<0&&disabledDomains.push(n),e.disabledDomains=disabledDomains,storeOpt(e)}):chrome.tabs.query({active:!0,currentWindow:!0},function(a){var t=document.createElement("a");t.href=a[0].url;var n=t.hostname;if(disabledDomains.indexOf(n)>=0){var d=disabledDomains.indexOf(n);disabledDomains.splice(d,1)}e.disabledDomains=disabledDomains,storeOpt(e)})}function storeOpt(e){chrome.storage.sync.set(e,function(){var e=document.body,a=document.createElement("aside");a.className="toaster";var t=document.createElement("p");t.textContent="Your settings have been saved.",a.append(t),e.append(a),setTimeout(function(){a.remove()},3e3),chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.reload(e[0].id)})})}function initOpts(){document.querySelector("#opt-form").addEventListener("submit",function(e){e.preventDefault(),saveOpts()}),chrome.storage.sync.get({disabledDomains:[],disableAll:!1},function(e){disabledDomains=e.disabledDomains,disableAll=e.disableAll,chrome.tabs.query({active:!0,currentWindow:!0},function(e){var a=document.createElement("a");a.href=e[0].url;var t=a.hostname;disabledDomains.indexOf(t)>=0&&(document.querySelector("#opt-disable").checked=!0)}),!0===disableAll&&(document.querySelector("#opt-disable-all").checked=!0)})}disabledDomains=[],disableAll=!1,document.addEventListener("DOMContentLoaded",initOpts);